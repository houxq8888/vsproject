set(LIBRARY_VERSION_MAJOR 1)
set(LIBRARY_VERSION_MINOR 0)
set(LIBRARY_VERSION_PATCH 0)

set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_STANDARD_REQUIRED ON)



HG_CMAKE_ADD_MODULE(CommunicateService inc src)
HG_CMAKE_MODULE_DEPEND_PUB( 
    HGCommon
    HGConfig
    HGFrameService
    ${LOG4CPLUS_LIBRARIES}
    ${VSOMEIP_LIBRARIES}
    ${ZeroMQ_LIBRARY}
    # ${MQTT_LIBRARYS}
    ${LIB_MOSQUITT_LIBRARY}
    ${PULSE_LIBRARIES}
    ${LIBSSH_LIBRARIES}
    ${LIB_SERIALPORT_LIBRARY}
    ${AVFORMAT_LIBRARIES}
    ${AVCODEC_LIBRARIES}
    ${AVUTIL_LIBRARIES}
    ${SWSCALE_LIBRARIES}
    ${HARU_LIBRARY}
    ${CUPS_LIBRARY}
    ${XLSXIO_READ_LIBRARY}
    ${XLSXIO_WRITE_LIBRARY}
)

if (PLATFORM STREQUAL "x64")

HG_CMAKE_ADD_SHARED(HGCommunicateService inc src)

HG_CMAKE_MODULE_DEPEND(
    HGCommon
    HGConfig
    HGFrameService
    ${LOG4CPLUS_LIBRARIES}
    ${VSOMEIP_LIBRARIES}
    ${ZeroMQ_LIBRARY}
    ${MQTT_LIBRARYS}
    ${LIB_MOSQUITT_LIBRARY}
    ${PULSE_LIBRARIES}
    ${LIBSSH_LIBRARIES}
    ${LIB_SERIALPORT_LIBRARY}
    ${AVFORMAT_LIBRARIES}
    ${AVCODEC_LIBRARIES}
    ${AVUTIL_LIBRARIES}
    ${SWSCALE_LIBRARIES}
    ${OpenCV_LIBRARIES}
    ${HARU_LIBRARY}
    ${CUPS_LIBRARY}
    ${XLSXIO_READ_LIBRARY}
    ${XLSXIO_WRITE_LIBRARY}
)

elseif (PLATFORM STREQUAL "win32")
HG_CMAKE_ADD_STATIC(HGCommunicateService inc src)
HG_CMAKE_MODULE_DEPEND(
    HGCommon
    HGConfig
    HGFrameService
    ${VSOMEIP_LIBRARIES}
    ${ZeroMQ_LIBRARY}
    ${MQTT_LIBRARYS}
    ${LIB_MOSQUITT_LIBRARY}
    ${LIBSSH_LIBRARIES}
)

endif()

set_target_properties(HGCommunicateService PROPERTIES 
    VERSION ${LIBRARY_VERSION_MAJOR}.${LIBRARY_VERSION_MINOR}.${LIBRARY_VERSION_PATCH}
    SOVERSION ${LIBRARY_VERSION_MAJOR}
)
