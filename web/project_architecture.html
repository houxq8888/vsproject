<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vsproject é¡¹ç›®æŠ€æœ¯æ¶æ„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .architecture-overview {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .architecture-overview h2 {
            color: #4a5568;
            margin-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
        }

        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .tech-item {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid #667eea;
        }

        .tech-item h3 {
            color: #2d3748;
            margin-bottom: 10px;
        }

        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .module-category {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .module-category:hover {
            transform: translateY(-5px);
        }

        .module-category h3 {
            color: #2d3748;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .module-category h3::before {
            content: "ğŸ“¦";
            font-size: 1.5em;
        }

        .module-list {
            list-style: none;
        }

        .module-item {
            background: #f7fafc;
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #48bb78;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .module-item:hover {
            background: #edf2f7;
            transform: translateX(5px);
        }

        .module-item h4 {
            color: #2d3748;
            margin-bottom: 5px;
        }

        .module-item p {
            color: #718096;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .module-item.compilable {
            border-left-color: #667eea;
            position: relative;
        }

        .module-item.compilable::after {
            content: "ç¼–è¯‘";
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: #667eea;
            color: white;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            cursor: pointer;
        }

        .module-item.compilable:hover::after {
            background: #5568d3;
        }

        .compile-panel {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: none;
        }

        .compile-panel.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .compile-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-btn {
            background: #e53e3e;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .close-btn:hover {
            background: #c53030;
        }

        .compile-options {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .compile-options h4 {
            color: #2d3748;
            margin-bottom: 15px;
        }

        .build-type-selector {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .build-type-btn {
            padding: 10px 20px;
            border: 2px solid #e2e8f0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .build-type-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .build-type-btn:hover {
            border-color: #667eea;
        }

        .clean-build-option {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .compile-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .compile-btn {
            padding: 12px 30px;
            background: #48bb78;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .compile-btn:hover {
            background: #38a169;
        }

        .compile-btn:disabled {
            background: #a0aec0;
            cursor: not-allowed;
        }

        .stop-btn {
            padding: 12px 30px;
            background: #e53e3e;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .stop-btn:hover {
            background: #c53030;
        }

        .stop-btn:disabled {
            background: #a0aec0;
            cursor: not-allowed;
        }

        .package-btn {
            padding: 12px 30px;
            background: #ed8936;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .package-btn:hover {
            background: #dd6b20;
        }

        .package-btn:disabled {
            background: #a0aec0;
            cursor: not-allowed;
        }

        .compile-output {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
        }

        .compile-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 8px;
        }

        .status-running {
            background: #fef5e7;
            color: #d68910;
        }

        .status-success {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .status-error {
            background: #fce4ec;
            color: #c62828;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .module-details {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: none;
        }

        .module-details.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .details-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .details-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .dependencies, .features {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
        }

        .dependencies h4, .features h4 {
            color: #2d3748;
            margin-bottom: 15px;
        }

        .dependency-list, .feature-list {
            list-style: none;
        }

        .dependency-list li, .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .dependency-list li:last-child, .feature-list li:last-child {
            border-bottom: none;
        }

        .build-info {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .build-info h2 {
            color: #4a5568;
            margin-bottom: 20px;
        }

        .build-commands {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .command-item {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #ed8936;
        }

        .command-item h4 {
            color: #2d3748;
            margin-bottom: 10px;
        }

        .command-item code {
            background: #edf2f7;
            padding: 5px 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            color: #e53e3e;
        }

        @media (max-width: 768px) {
            .details-content {
                grid-template-columns: 1fr;
            }
            
            .modules-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }

        /* ç¼–è¯‘æ§åˆ¶æ ·å¼ */
        .compile-controls {
            margin-top: 20px;
            padding: 20px;
            background: #f7fafc;
            border-radius: 10px;
            border-left: 4px solid #ed8936;
        }

        .compile-controls h4 {
            color: #2d3748;
            margin-bottom: 15px;
        }

        .compile-options {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .compile-options label {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
        }

        .compile-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .compile-btn {
            background: #48bb78;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .compile-btn:hover:not(:disabled) {
            background: #38a169;
        }

        .compile-btn:disabled {
            background: #a0aec0;
            cursor: not-allowed;
        }

        .stop-btn {
            background: #e53e3e;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .stop-btn:hover:not(:disabled) {
            background: #c53030;
        }

        .stop-btn:disabled {
            background: #a0aec0;
            cursor: not-allowed;
        }

        .compile-output {
            background: #1a202c;
            color: #cbd5e0;
            padding: 15px;
            border-radius: 5px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            line-height: 1.4;
        }

        .compile-output h5 {
            color: #e2e8f0;
            margin-bottom: 10px;
        }

        .compile-output pre {
            white-space: pre-wrap;
            word-break: break-all;
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>vsproject é¡¹ç›®æŠ€æœ¯æ¶æ„</h1>
            <p>åŸºäºC++/Qtçš„æ¨¡å—åŒ–è½¯ä»¶é¡¹ç›® - å®Œæ•´æŠ€æœ¯æ ˆå±•ç¤º</p>
        </div>

        <div class="architecture-overview">
            <h2>ğŸ“Š æŠ€æœ¯æ¶æ„æ¦‚è§ˆ</h2>
            <p>vsprojectæ˜¯ä¸€ä¸ªå¤§å‹çš„C++è½¯ä»¶é¡¹ç›®ï¼Œé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„è®¾è®¡ï¼Œæ”¯æŒè·¨å¹³å°å¼€å‘ï¼ˆLinux/Windowsï¼‰ï¼Œä¸»è¦é¢å‘ç§‘å­¦ä»ªå™¨å’Œå·¥ä¸šè‡ªåŠ¨åŒ–é¢†åŸŸã€‚</p>
            
            <div class="tech-stack">
                <div class="tech-item">
                    <h3>ç¼–ç¨‹è¯­è¨€</h3>
                    <p>C++ 17/20</p>
                </div>
                <div class="tech-item">
                    <h3>GUIæ¡†æ¶</h3>
                    <p>Qt 5.14+</p>
                </div>
                <div class="tech-item">
                    <h3>æ„å»ºç³»ç»Ÿ</h3>
                    <p>CMake 3.22+</p>
                </div>
                <div class="tech-item">
                    <h3>å›¾åƒå¤„ç†</h3>
                    <p>OpenCV 4.6+</p>
                </div>
                <div class="tech-item">
                    <h3>ç½‘ç»œé€šä¿¡</h3>
                    <p>MQTT/WebSocket</p>
                </div>
                <div class="tech-item">
                    <h3>æ•°æ®åº“</h3>
                    <p>SQLCipher</p>
                </div>
            </div>
        </div>

        <div class="modules-grid">
            <!-- HGAppModule æ¨¡å— -->
            <div class="module-category">
                <h3>ğŸ“¦ HGAppModule æ¨¡å—</h3>
                <ul class="module-list">
                    <li class="module-item compilable" onclick="showCompilePanel('HGBaseAppModule')">
                        <h4>HGBaseAppModule</h4>
                        <p>åŸºç¡€åº”ç”¨æ¨¡å— - æä¾›æ ¸å¿ƒåŠŸèƒ½å’ŒåŸºç¡€æœåŠ¡</p>
                    </li>
                    <li class="module-item compilable" onclick="showCompilePanel('HGUserAuditModule')">
                        <h4>HGUserAuditModule</h4>
                        <p>ç”¨æˆ·å®¡è®¡æ¨¡å— - ç”¨æˆ·æƒé™ç®¡ç†å’Œæ“ä½œæ—¥å¿—</p>
                    </li>
                    <li class="module-item compilable" onclick="showCompilePanel('HGLogModule')">
                        <h4>HGLogModule</h4>
                        <p>æ—¥å¿—æ¨¡å— - ç³»ç»Ÿæ—¥å¿—è®°å½•å’Œç®¡ç†</p>
                    </li>
                    <li class="module-item compilable" onclick="showCompilePanel('HGLoginModule')">
                        <h4>HGLoginModule</h4>
                        <p>ç™»å½•æ¨¡å— - ç”¨æˆ·è®¤è¯å’Œä¼šè¯ç®¡ç†</p>
                    </li>
                    <li class="module-item compilable" onclick="showCompilePanel('HGChannelModule')">
                        <h4>HGChannelModule</h4>
                        <p>é€šé“æ¨¡å— - å¤šé€šé“æ•°æ®é‡‡é›†å’Œæ§åˆ¶</p>
                    </li>
                    <li class="module-item compilable" onclick="showCompilePanel('HGCurveModule')">
                        <h4>HGCurveModule</h4>
                        <p>æ›²çº¿æ¨¡å— - æ•°æ®æ›²çº¿ç»˜åˆ¶å’Œåˆ†æ</p>
                    </li>
                    <li class="module-item compilable" onclick="showCompilePanel('HGFlowModule')">
                        <h4>HGFlowModule</h4>
                        <p>æµç¨‹æ¨¡å— - å·¥ä½œæµç¨‹ç®¡ç†å’Œæ§åˆ¶</p>
                    </li>
                    <li class="module-item compilable" onclick="showCompilePanel('HGMethodModule')">
                        <h4>HGMethodModule</h4>
                        <p>æ–¹æ³•æ¨¡å— - å®éªŒæ–¹æ³•é…ç½®å’Œæ‰§è¡Œ</p>
                    </li>
                    <li class="module-item compilable" onclick="showCompilePanel('HGPrintModule')">
                        <h4>HGPrintModule</h4>
                        <p>æ‰“å°æ¨¡å— - æŠ¥å‘Šæ‰“å°å’ŒPDFç”Ÿæˆ</p>
                    </li>
                    <li class="module-item compilable" onclick="showCompilePanel('HGReagentModule')">
                        <h4>HGReagentModule</h4>
                        <p>è¯•å‰‚æ¨¡å— - è¯•å‰‚ç®¡ç†å’Œåº“å­˜æ§åˆ¶</p>
                    </li>
                    <li class="module-item compilable" onclick="showCompilePanel('HGScannerModule')">
                        <h4>HGScannerModule</h4>
                        <p>æ‰«ææ¨¡å— - äºŒç»´ç æ‰«æå’Œæ¡ç è¯†åˆ«</p>
                    </li>
                    <li class="module-item compilable" onclick="showCompilePanel('HGSearchModule')">
                        <h4>HGSearchModule</h4>
                        <p>æœç´¢æ¨¡å— - æ•°æ®æ£€ç´¢å’ŒæŸ¥è¯¢åŠŸèƒ½</p>
                    </li>
                    <li class="module-item compilable" onclick="showCompilePanel('HGTaskModule')">
                        <h4>HGTaskModule</h4>
                        <p>ä»»åŠ¡ç®¡ç†æ¨¡å— - ä»»åŠ¡è°ƒåº¦å’Œè¿›åº¦è·Ÿè¸ª</p>
                    </li>
                    <li class="module-item compilable" onclick="showCompilePanel('HGUartModule')">
                        <h4>HGUartModule</h4>
                        <p>ä¸²å£é€šä¿¡æ¨¡å— - ä¸²å£é…ç½®å’Œæ•°æ®ä¼ è¾“</p>
                    </li>
                    <li class="module-item compilable" onclick="showCompilePanel('HGAnalysisRecordModule')">
                        <h4>HGAnalysisRecordModule</h4>
                        <p>åˆ†æè®°å½•æ¨¡å— - æ•°æ®è®°å½•å’Œåˆ†æç»“æœ</p>
                    </li>
                    <li class="module-item compilable" onclick="showCompilePanel('HGCameraRecognizeModule')">
                        <h4>HGCameraRecognizeModule</h4>
                        <p>ç›¸æœºè¯†åˆ«æ¨¡å— - å›¾åƒè¯†åˆ«å’Œç›¸æœºæ§åˆ¶</p>
                    </li>
                    <li class="module-item compilable" onclick="showCompilePanel('HGEBalanceModule')">
                        <h4>HGEBalanceModule</h4>
                        <p>ç”µå­ç§¤æ¨¡å— - é‡é‡æµ‹é‡å’Œæ•°æ®é‡‡é›†</p>
                    </li>
                    <li class="module-item compilable" onclick="showCompilePanel('HGExceptionHandleModule')">
                        <h4>HGExceptionHandleModule</h4>
                        <p>å¼‚å¸¸å¤„ç†æ¨¡å— - å¼‚å¸¸æ•è·å’Œé”™è¯¯å¤„ç†</p>
                    </li>
                    <li class="module-item compilable" onclick="showCompilePanel('HGSharedFileModule')">
                        <h4>HGSharedFileModule</h4>
                        <p>å…±äº«æ–‡ä»¶æ¨¡å— - æ–‡ä»¶å…±äº«å’Œæ•°æ®åŒæ­¥</p>
                    </li>
                </ul>
            </div>
        </div>

        <!-- æ¨¡å—è¯¦æƒ…åŒºåŸŸ -->
        <div class="compile-panel" id="compile-panel">
            <div class="compile-header">
                <h2 id="compile-module-name">ç¼–è¯‘æ¨¡å—</h2>
                <button class="close-btn" onclick="closeCompilePanel()">å…³é—­</button>
            </div>
            <div class="compile-options">
                <h4>ç¼–è¯‘é€‰é¡¹</h4>
                <div class="build-type-selector">
                    <button class="build-type-btn active" onclick="selectBuildType('Release')">Release</button>
                    <button class="build-type-btn" onclick="selectBuildType('Debug')">Debug</button>
                </div>
                <div class="clean-build-option">
                    <input type="checkbox" id="clean-build" checked>
                    <label for="clean-build">æ¸…ç†æ„å»ºç›®å½•ï¼ˆé‡æ–°ç”ŸæˆEXEå’Œ.aï¼‰</label>
                </div>
            </div>
            <div class="compile-controls">
                <button class="compile-btn" onclick="startCompile()" id="compile-btn">å¼€å§‹ç¼–è¯‘</button>
                <button class="stop-btn" onclick="stopCompile()" id="stop-btn" disabled>åœæ­¢ç¼–è¯‘</button>
                <button class="package-btn" onclick="packageModule()" id="package-btn" disabled>æ‰“åŒ…è¿è¡Œ</button>
            </div>
            <div class="compile-status" id="compile-status" style="display: none;">
                <div class="spinner" id="spinner"></div>
                <span id="status-text"></span>
            </div>
            <div class="compile-output" id="compile-output">å‡†å¤‡å°±ç»ª</div>
        </div>

        <div id="moduleDetails" class="module-details">
            <div class="details-header">
                <h3 id="detailTitle">æ¨¡å—è¯¦æƒ…</h3>
                <button class="close-btn" onclick="hideModuleDetails()">å…³é—­</button>
            </div>
            <div class="details-content">
                <div class="dependencies">
                    <h4>ä¾èµ–å…³ç³»</h4>
                    <ul id="dependencyList" class="dependency-list">
                        <!-- åŠ¨æ€å¡«å…… -->
                    </ul>
                </div>
                <div class="features">
                    <h4>ä¸»è¦åŠŸèƒ½</h4>
                    <ul id="featureList" class="feature-list">
                        <!-- åŠ¨æ€å¡«å…… -->
                    </ul>
                </div>
            </div>
        </div>

        <div class="build-info">
            <h2>ğŸ”§ æ„å»ºå’Œéƒ¨ç½²</h2>
            <div class="build-commands">
                <div class="command-item">
                    <h4>ç¼–è¯‘é¡¹ç›®</h4>
                    <p>ä½¿ç”¨æ ¹ç›®å½•ä¸‹çš„build.batè¿›è¡Œç¼–è¯‘ï¼š</p>
                    <code>./build.bat</code>
                </div>
                <div class="command-item">
                    <h4>è¿è¡Œç¨‹åº</h4>
                    <p>ç¼–è¯‘å®Œæˆåè¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼š</p>
                    <code>./build/software-editor.exe</code>
                </div>
                <div class="command-item">
                    <h4>æµ‹è¯•è„šæœ¬</h4>
                    <p>UIè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ä½ç½®ï¼š</p>
                    <code>./test/ui_automation</code>
                </div>
                <div class="command-item">
                    <h4>æ¨¡å—åŒ–ç¼–è¯‘</h4>
                    <p>æ”¯æŒå•ä¸ªæ¨¡å—çš„ç‹¬ç«‹ç¼–è¯‘å’Œæµ‹è¯•</p>
                    <code>./build_module.sh [æ¨¡å—å]</code>
                </div>
            </div>
        </div>
    </div>

    <script>
        // HGAppModule æ¨¡å—åˆ—è¡¨
        const hgAppModules = [
            { name: 'HGBaseAppModule', description: 'åŸºç¡€åº”ç”¨æ¨¡å—', dependencies: ['Qt'], features: ['åŸºç¡€æ¡†æ¶', 'æ—¥å¿—ç³»ç»Ÿ'] },
            { name: 'HGUserAuditModule', description: 'ç”¨æˆ·å®¡è®¡æ¨¡å—', dependencies: ['Qt', 'SQLCipher'], features: ['ç”¨æˆ·ç®¡ç†', 'æƒé™æ§åˆ¶'] },
            { name: 'HGLogModule', description: 'æ—¥å¿—æ¨¡å—', dependencies: ['Qt', 'log4cplus'], features: ['æ—¥å¿—è®°å½•', 'æ—¥å¿—æŸ¥è¯¢'] },
            { name: 'HGLoginModule', description: 'ç™»å½•æ¨¡å—', dependencies: ['Qt', 'SQLCipher'], features: ['ç”¨æˆ·è®¤è¯', 'ä¼šè¯ç®¡ç†'] },
            { name: 'HGChannelModule', description: 'é€šé“ç®¡ç†æ¨¡å—', dependencies: ['Qt', 'SerialPort'], features: ['é€šé“é…ç½®', 'æ•°æ®é‡‡é›†'] },
            { name: 'HGCurveModule', description: 'æ›²çº¿å¤„ç†æ¨¡å—', dependencies: ['Qt', 'OpenCV'], features: ['æ•°æ®å¯è§†åŒ–', 'æ›²çº¿åˆ†æ'] },
            { name: 'HGFlowModule', description: 'æµç¨‹æ§åˆ¶æ¨¡å—', dependencies: ['Qt'], features: ['æµç¨‹å®šä¹‰', 'æ­¥éª¤ç®¡ç†'] },
            { name: 'HGMethodModule', description: 'æ–¹æ³•ç®¡ç†æ¨¡å—', dependencies: ['Qt'], features: ['æ–¹æ³•é…ç½®', 'å‚æ•°ç®¡ç†'] },
            { name: 'HGPrintModule', description: 'æ‰“å°æ¨¡å—', dependencies: ['Qt', 'HPDF'], features: ['æŠ¥å‘Šæ‰“å°', 'PDFç”Ÿæˆ'] },
            { name: 'HGReagentModule', description: 'è¯•å‰‚ç®¡ç†æ¨¡å—', dependencies: ['Qt', 'SQLCipher'], features: ['è¯•å‰‚åº“å­˜', 'æœ‰æ•ˆæœŸç®¡ç†'] },
            { name: 'HGScannerModule', description: 'æ‰«ææ¨¡å—', dependencies: ['Qt', 'ZXing'], features: ['äºŒç»´ç æ‰«æ', 'æ¡ç è¯†åˆ«'] },
            { name: 'HGSearchModule', description: 'æœç´¢æ¨¡å—', dependencies: ['Qt'], features: ['æ•°æ®æœç´¢', 'ç»“æœè¿‡æ»¤'] },
            { name: 'HGTaskModule', description: 'ä»»åŠ¡ç®¡ç†æ¨¡å—', dependencies: ['Qt'], features: ['ä»»åŠ¡è°ƒåº¦', 'è¿›åº¦è·Ÿè¸ª'] },
            { name: 'HGUartModule', description: 'ä¸²å£é€šä¿¡æ¨¡å—', dependencies: ['Qt', 'SerialPort'], features: ['ä¸²å£é…ç½®', 'æ•°æ®ä¼ è¾“'] },
            { name: 'HGAnalysisRecordModule', description: 'åˆ†æè®°å½•æ¨¡å—', dependencies: ['Qt'], features: ['æ•°æ®è®°å½•', 'åˆ†æç»“æœ'] },
            { name: 'HGCameraRecognizeModule', description: 'ç›¸æœºè¯†åˆ«æ¨¡å—', dependencies: ['Qt', 'OpenCV'], features: ['å›¾åƒè¯†åˆ«', 'ç›¸æœºæ§åˆ¶'] },
            { name: 'HGEBalanceModule', description: 'ç”µå­ç§¤æ¨¡å—', dependencies: ['Qt'], features: ['é‡é‡æµ‹é‡', 'æ•°æ®é‡‡é›†'] },
            { name: 'HGExceptionHandleModule', description: 'å¼‚å¸¸å¤„ç†æ¨¡å—', dependencies: ['Qt'], features: ['å¼‚å¸¸æ•è·', 'é”™è¯¯å¤„ç†'] },
            { name: 'HGSharedFileModule', description: 'å…±äº«æ–‡ä»¶æ¨¡å—', dependencies: ['Qt'], features: ['æ–‡ä»¶å…±äº«', 'æ•°æ®åŒæ­¥'] }
        ];

        // ç¼–è¯‘çŠ¶æ€
        let currentBuildType = 'Release';
        let currentModule = null;
        let compileStatusInterval = null;

        // åˆå§‹åŒ–æ¨¡å—åˆ—è¡¨ï¼ˆç®€åŒ–ç‰ˆï¼Œç›´æ¥ä½¿ç”¨HTMLä¸­çš„æ¨¡å—åˆ—è¡¨ï¼‰
        function initModules() {
            // æ¨¡å—åˆ—è¡¨å·²ç»åœ¨HTMLä¸­å®šä¹‰ï¼Œè¿™é‡Œä¸éœ€è¦é‡å¤åˆ›å»º
            console.log('é¡µé¢åˆå§‹åŒ–å®Œæˆ');
        }

        // æ˜¾ç¤ºç¼–è¯‘é¢æ¿
        function showCompilePanel(moduleName) {
            currentModule = moduleName;
            document.getElementById('compile-module-name').textContent = `ç¼–è¯‘æ¨¡å—: ${moduleName}`;
            document.getElementById('compile-panel').classList.add('active');
            document.getElementById('compile-output').textContent = 'å‡†å¤‡å°±ç»ª';
            document.getElementById('compile-status').style.display = 'none';
            document.getElementById('package-btn').disabled = true;
        }

        // å…³é—­ç¼–è¯‘é¢æ¿
        function closeCompilePanel() {
            document.getElementById('compile-panel').classList.remove('active');
            stopStatusPolling();
            currentModule = null;
        }

        // é€‰æ‹©ç¼–è¯‘æ¨¡å¼
        function selectBuildType(buildType) {
            currentBuildType = buildType;
            document.querySelectorAll('.build-type-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        // å¼€å§‹ç¼–è¯‘
        async function startCompile() {
            if (!currentModule) {
                alert('è¯·å…ˆé€‰æ‹©è¦ç¼–è¯‘çš„æ¨¡å—');
                return;
            }

            const cleanBuild = document.getElementById('clean-build').checked;
            
            // é‡ç½®æŒ‰é’®çŠ¶æ€
            document.getElementById('compile-btn').disabled = true;
            document.getElementById('stop-btn').disabled = false;
            document.getElementById('package-btn').disabled = true;
            
            // åˆå§‹åŒ–ç¼–è¯‘è¾“å‡º
            const outputElement = document.getElementById('compile-output');
            outputElement.textContent = `æ­£åœ¨å¯åŠ¨ç¼–è¯‘ ${currentModule} (${currentBuildType})...\n`;
            outputElement.scrollTop = outputElement.scrollHeight;
            
            // æ˜¾ç¤ºç¼–è¯‘çŠ¶æ€
            showCompileStatus('running', `æ­£åœ¨ç¼–è¯‘ ${currentModule} (${currentBuildType})...`);

            try {
                console.log(`å¯åŠ¨ç¼–è¯‘: ${currentModule}, æ¨¡å¼: ${currentBuildType}, æ¸…ç†: ${cleanBuild}`);
                
                const response = await fetch('/api/compile/start', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        module: currentModule,
                        build_type: currentBuildType,
                        clean_build: cleanBuild
                    })
                });

                const result = await response.json();
                console.log('ç¼–è¯‘å¯åŠ¨å“åº”:', result);
                
                if (response.ok) {
                    outputElement.textContent += `ç¼–è¯‘å·²å¯åŠ¨ï¼Œæ­£åœ¨ç­‰å¾…è¾“å‡º...\n`;
                    startStatusPolling();
                } else {
                    const errorMsg = result.error || 'ç¼–è¯‘å¯åŠ¨å¤±è´¥';
                    console.error('ç¼–è¯‘å¯åŠ¨å¤±è´¥:', errorMsg);
                    showCompileStatus('error', errorMsg);
                    outputElement.textContent += `âŒ ${errorMsg}\n`;
                    resetButtons();
                }
            } catch (error) {
                console.error('ç¼–è¯‘å¯åŠ¨å¼‚å¸¸:', error);
                const errorMsg = `ç½‘ç»œé”™è¯¯: ${error.message}`;
                showCompileStatus('error', errorMsg);
                outputElement.textContent += `âŒ ${errorMsg}\n`;
                resetButtons();
            }
        }

        // åœæ­¢ç¼–è¯‘
        async function stopCompile() {
            try {
                const response = await fetch('/api/compile/stop', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    }
                });

                const result = await response.json();
                if (response.ok) {
                    document.getElementById('compile-output').textContent += '\n' + result.message;
                } else {
                    document.getElementById('compile-output').textContent += '\nåœæ­¢ç¼–è¯‘å¤±è´¥: ' + result.error;
                }
                stopStatusPolling();
                resetButtons();
            } catch (error) {
                document.getElementById('compile-output').textContent += '\nç½‘ç»œé”™è¯¯: ' + error.message;
                resetButtons();
            }
        }

        // æ‰“åŒ…æ¨¡å—
        async function packageModule() {
            if (!currentModule) return;

            document.getElementById('package-btn').disabled = true;
            document.getElementById('compile-output').textContent += '\n\nå¼€å§‹æ‰“åŒ…...';

            try {
                // è¿™é‡Œå¯ä»¥å®ç°æ‰“åŒ…é€»è¾‘
                document.getElementById('compile-output').textContent += '\nâœ… æ‰“åŒ…å®Œæˆï¼';
                document.getElementById('package-btn').disabled = false;
            } catch (error) {
                document.getElementById('compile-output').textContent += '\nâŒ æ‰“åŒ…å¤±è´¥: ' + error.message;
                document.getElementById('package-btn').disabled = false;
            }
        }

        // å¼€å§‹è½®è¯¢ç¼–è¯‘çŠ¶æ€
        function startStatusPolling() {
            // æ¸…é™¤ä¹‹å‰çš„è½®è¯¢
            stopStatusPolling();
            
            compileStatusInterval = setInterval(async () => {
                try {
                    const response = await fetch('/api/compile/status');
                    const status = await response.json();

                    // æ›´æ–°è¾“å‡ºå†…å®¹
                    const outputElement = document.getElementById('compile-output');
                    if (status.output_lines && status.output_lines.length > 0) {
                        outputElement.textContent = status.output_lines.join('\n');
                    }
                    outputElement.scrollTop = outputElement.scrollHeight; // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨

                    // æ£€æŸ¥ç¼–è¯‘çŠ¶æ€
                    if (!status.is_running) {
                        stopStatusPolling();
                        if (status.output_lines && status.output_lines.some(line => line.includes('ç¼–è¯‘æˆåŠŸ'))) {
                            showCompileStatus('success', `ç¼–è¯‘æˆåŠŸ: ${currentModule}`);
                            document.getElementById('package-btn').disabled = false;
                        } else if (status.output_lines && status.output_lines.some(line => line.includes('ç¼–è¯‘å¤±è´¥'))) {
                            showCompileStatus('error', `ç¼–è¯‘å¤±è´¥: ${currentModule}`);
                        } else {
                            showCompileStatus('error', `ç¼–è¯‘å¼‚å¸¸: ${currentModule}`);
                        }
                        resetButtons();
                    }
                } catch (error) {
                    console.error('è½®è¯¢çŠ¶æ€å¤±è´¥:', error);
                }
            }, 500); // å¢åŠ è½®è¯¢é¢‘ç‡ï¼Œæé«˜å“åº”é€Ÿåº¦
        }

        // åœæ­¢è½®è¯¢ç¼–è¯‘çŠ¶æ€
        function stopStatusPolling() {
            if (compileStatusInterval) {
                clearInterval(compileStatusInterval);
                compileStatusInterval = null;
            }
        }

        // æ˜¾ç¤ºç¼–è¯‘çŠ¶æ€
        function showCompileStatus(type, message) {
            const statusDiv = document.getElementById('compile-status');
            const statusText = document.getElementById('status-text');
            
            statusDiv.style.display = 'flex';
            statusDiv.className = 'compile-status status-' + type;
            statusText.textContent = message;
        }

        // é‡ç½®æŒ‰é’®çŠ¶æ€
        function resetButtons() {
            document.getElementById('compile-btn').disabled = false;
            document.getElementById('stop-btn').disabled = true;
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', initModules);
    </script>
</body>
</html>